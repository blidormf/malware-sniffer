<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Home</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <script th:src="@{/js/script.js}" defer></script>
</head>
<body>
    <div sec:authorize="isAnonymous()">
        <a th:href="@{/oauth2/authorization/github}" class="btn btn-primary">Login with GitHub</a>
    </div>

    <div sec:authorize="isAuthenticated()">
        <p>Logged in as <span th:text="${#authentication.principal.attributes.username}"></span></p>
        <form th:action="@{/logout}" method="post">
            <button type="submit" class="btn btn-danger">Logout</button>
        </form>
    </div>

    <div>
        <h1>Scan a File</h1>
        <p>Scan your files with our advanced Malware-SMELL model and keep your systems secure.</p>
        <form th:action="@{/file-scan-results}" method="post" enctype="multipart/form-data">
            <div>
                <label for="file">Select a file to upload:</label>
                <input type="file" id="file" name="file" required>
            </div>
            <button type="submit">Scan</button>
        </form>
        <div th:if="${fileError}">
            <p th:text="${fileError}"></p>
        </div>
    </div>

    <div>
        <h1>Scan a Link</h1>
        <p>Run URLs through BERT, our AI-powered URL scanner, and avoid falling victim to online threats.</p>
        <form th:action="@{/link-scan-results}" method="post">
            <div>
                <label for="url">Enter URL:</label>
                <input type="text" id="url" name="url" required>
            </div>
            <button type="submit">Scan</button>
        </form>
        <div th:if="${linkError}">
            <p th:text="${linkError}"></p>
        </div>
    </div>
</body>
</html>