let fileButton = document.querySelector(".file button");
let urlButton = document.querySelector(".url button");
let searchfile = document.querySelector("#search-file");
let searchurl = document.querySelector("#search-url");

fileButton.addEventListener('click', function () {
    fileButton.classList.add("active");
    urlButton.classList.remove("active");
    searchurl.style.display = "none";
    searchfile.style.display = "block";
});

urlButton.addEventListener('click', function () {
    urlButton.classList.add("active");
    fileButton.classList.remove("active");
    searchfile.style.display = "none";
    searchurl.style.display = "block";
});

// Set the initial active state
fileButton.classList.add("active");

let fileInput = document.querySelector("#input-file");
let fileName = document.querySelector("#file-name");

fileInput.addEventListener("change", function () {
    if (fileInput.files.length > 0) {
        fileName.textContent = fileInput.files[0].name;
    } else {
        fileName.textContent = "No file selected";
    }
});

let urlInput = document.querySelector("#input-url");
let fileScanButton = document.querySelector("#search-file .scan");
let urlScanButton = document.querySelector("#search-url .scan");
let loadingOverlay = document.querySelector("#loading-overlay");
let mainContent = document.querySelector("main");

fileScanButton.addEventListener('click', function (event) {
    event.preventDefault();
    if (fileInput.files.length > 0) {
        loadingOverlay.style.display = "flex";
        mainContent.classList.add("blur");
        setTimeout(function () {
            document.querySelector("#search-file form").submit();
        }, 1000);
    }
});

urlScanButton.addEventListener('click', function (event) {
    event.preventDefault();
    if (urlInput.value.trim() !== "") {
        loadingOverlay.style.display = "flex";
        mainContent.classList.add("blur");
        setTimeout(function () {
            document.querySelector("#search-url form").submit();
        }, 1000);
    }
});

// Hide the loading overlay when the page finishes loading
window.addEventListener('load', function () {
    loadingOverlay.style.display = "none";
    mainContent.classList.remove("blur");
});